 = Base Procedures For Opening/Closing =

Each section below represents the procedures and files needing
update on Opening/Closing of a new series or point release.  These
can be converted to trello cards using scripting in kteam-tools.
Export this as text and use that as input.


== Development Becomes Stable ==
 - Switch development series to stable
    - In kteam-tools/info/kernel-series.yaml
       - Mark the series as “supported: true”, “development: false”


== New Series Opening ==
 - Add new series to Ubuntu KTL
    - In kteam-tools/info/kernel-series.yaml:
       - New section for the new series.
       - Mark the new series as “supported : false”; “development: true”; “opening:”
       - CHECK: confirm that we have derived kernels specified correctly in the previous series.
 - Archive opening
    - NEEDS: final name set and archive accepting uploads
    - OPENING: opening: archive-open: true
 - Create new primary repositories
    - NEEDS: launchpad admin for ubuntu-kernel/canonical-kernel
    - run the admin/admin-seed-repositories script to initialise
      the primary and security repositories
    - XXX: permissions
    - OPENING: opening: repositories: true
 - Add repositories to wani mirroring
    - NEEDS: repos
    - Wait for mirroring to create repos
    - add symlinks to ubuntu directory to expose them for legacy user
 - Create new security git repositories
    - NEEDS: launchpad group admin for canonical-kernel-security-team
    - git remote add security lp-private:...
    - git push security master
    - Repeat for linux-signed and linux-meta
 - Create new linux-snap git repository
    - NEEDS: launchpad admin for ubuntu-kernel
    - NOTE: Only needed on LTSs
    - git fetch origin
    - git push lp:lp:~ubuntu-kernel/+git/linux-snap-<series> refs/remotes/origin/master:heads/refs/master
 - Create snap build recipies
    - NEEDS: linux-snap git repository created
    - NEEDS: collaborator on the snaps to be added
    - Create recipies (Producing snaps documentation)
 - Prime builder-extras for the new series
    - NEEDS: series open in launchpad and launchpad builders valid
    - Copy any valid packages in old series to new series
 - Add series to chroot creation
    - NEEDS: builder-extras primed
    - NEEDS: debootstrap updated for new series and installed on the builders
    - once opening: debootstrap: true is present the chroots will be added to
      the next automated run; once they are ready
    - OPENING: opening: chroots: true
 - Add series to ADT matrix
    - NEEDS: dashboard updated
    - Adt-matrix configuration:
    - Add a sensible version seed to the primary-hints.d and push
       - kteam-tools/adt-matrix/adt-gen-seed bionic linux http://people.canonical.com/~kernel/status/adt-matrix/artful-linux-meta.latest.json
 - Request Britney blocks for all copy-forward kernels
    - NEEDS: britney running
    - Each copy forward kernel needs blocking to prevent them escaping when the primary kernel is released
    - OPENING: opening: britney: true
 - Confirm ADT running for series
    - NEEDS: ADT running tests successfully in series
    - OPENING: opening: autopkgtest: true
 - Remove opening tag
    - NEEDS: repositories initialise
    - NEEDS: chroots created
    - NEEDS: britney running
    - NEEDS: autopkgtest running in series
    - remove “opening” from series stanza


== Point Release ==
 - Pick point release SRU cycle and announce
    - Pick a likely last SRU cycle to hit the point release image
 - Add/Update HWE backport in Ubuntu KTL
    - NEEDS REVIEW
    - XXX: new point release
    - kteam-tools/ktl/ubuntu.py
 - Update HWE-edge backport to point to the next series
 - Add linux-hwe/linux-hwe-edge to CVE autotriage/matrix if necessary
    - kteam-tools/cve-tools/cves-autotriage.conf
    - kteam-tools/cve-tools/cve-matrix/


== Old Series End ==
 - Pick last SRU cycle and announce
    - Pick a likely last SRU cycle announce this via email
 - Review CVEs for must haves
    - Review open CVEs for must have fixes to hit before the last SRU cycle is committed
 - Mark series as unsupported in Ubuntu KTL
    - NEEDS: EOL date formally past
    - kteam-tools/info/kernel-series.yaml
 - Drop series from CVE autotriage
    - NEEDS REVIEW (kernel-series changes may moot this)
    - cve-matrix/Makefile.combo
       - Remove from relevant matrix definitions
 - Disable chroots
    - kteam-tools/chroot-setup
    - Add series to expired_releases list in scripts/chroots-defs.conf
    - Remove chroots from builders
 - Drop series from ADT matrix
    - drop series specific hints
 - Close series nominations Won’t Fix
    - NEEDS: EOL date formally past
    - kteam-tools/bugs/close-eol-nominations <series>
