#!/bin/bash

here=`dirname $0`
case "$here" in
/*) ;;
*)  here="`pwd`/$here" ;;
esac

if [ "$?" -ne 0 ]; then
	echo "Usage: $0 <cmd> ..." 1>&2
	exit 1
fi
cmd="$1"
shift

SCRIPTS="debian/scripts/helpers/$cmd $here/master-helpers/$cmd $here/cranky-$cmd"
if [ -f debian/debian.env ] ; then
	source debian/debian.env
	SCRIPTS="$DEBIAN/scripts/helpers/$cmd $SCRIPTS"
fi

script=""
for s in $SCRIPTS; do
	if [ -x $s ] ; then
		script=$s
		break;
	fi
done

if [ -z "$script" ] ; then
	echo "$0: $cmd: command unknown" 1>&2
	exit 1
fi

C="$0" P="cranky $cmd" exec "$script" "$@"
