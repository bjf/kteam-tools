#!/usr/bin/python3 
from collections import defaultdict
import json
import sys

(series, package) = (sys.argv[1:3])
key = series + " " + package
for date in sys.argv[3:]:
    with open(date) as info_fd:
        info = json.load(info_fd)

    if key not in info:
        continue

    date = info[key]['meta']['date']
    
    # This almost cirtainly represents closure.
    if info[key]['state']['summary'].get('open', 0) == 0:
        continue

    print(date,
        info[key]['state']['summary']['open'],
        info[key]['priority']['by-summary']['open'].get('critical', 0),
        info[key]['priority']['by-summary']['open'].get('high', 0),
        info[key]['priority']['by-summary']['open'].get('medium', 0),
        info[key]['priority']['by-summary']['open'].get('low', 0),
        info[key]['priority']['by-summary']['open'].get('negligible', 0),
    )
