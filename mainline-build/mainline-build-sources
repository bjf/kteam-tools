#!/bin/bash

commit=`cat COMMIT`

case "$commit" in
*rc[0-9]*)	repo="linux.git" ;;
*)		repo="linux-stable.git" ;;
esac

{
	echo "git://kernel.ubuntu.com/virgin/$repo $commit"
	for patch in ????-*
	do
		echo "$patch"
	done
} >"SOURCES"

{
    cat - <<EOL
These binary packages represent builds of Linus' kernel tree at the commit below:

    $commit

To obtain the source from which they are built clone the tree below:

    git://kernel.ubuntu.com/virgin/$repo

checkout the commit (above), and apply the following patches:

EOL
    for patch in ????-*
    do
        echo "    $patch"
    done
    cat - <<EOL

This is summarised in the SOURCES file with these binaries.

For further information see: http://wiki.ubuntu.com/Kernel/MainlineBuilds
EOL
} >"README"
