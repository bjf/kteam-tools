#!/bin/bash

here=`dirname $0`
case "$here" in
/*) ;;
*)  here="`pwd`/$here" ;;
esac

cd "$here" || exit 1

echo "Starting `date`"
exec ./mainline-worker-kmsgq \
	--prefix-arg ./mainline-worker-kmsgq-runner \
	--admin mainline-cleaner \
	--admin mainline-flush \
	--admin cod-static-analysis-collect \
	--command any:mainline-test \
	--command any:mainline-build \
	--command any:cod-ubuntu-config \
	--command any:cod-changeset-build \
	--command any:cod-ubuntu-stable-core \
	--command x86:cod-ubuntu-stable-build.amd64 \
	--command x86:cod-ubuntu-stable-build.i386 \
	--command x86:cod-ubuntu-stable-build.arm64 \
	--command x86:cod-ubuntu-stable-build.armhf \
	--command x86:cod-ubuntu-stable-build.ppc64el \
	--command x86:cod-ubuntu-stable-build.s390x \
	`hostname` mainline-todo \
	"$@"
